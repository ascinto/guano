#Adapted from https://github.com/frederic-mahe/swarm/wiki/Fred's-metabarcoding-pipeline
#See link above for all dependencies and further instructions

#whether your create these blocks of code as separate shell scripts or one big one, make sure that you always do as follows:
## copy and paste the code into a text editor
## save that file with a '.sh' extension (example "mypipeline.sh") - note that no shebang necessary to invoke bash
## add permissions with 'chmod + x' (example "chmod + x mypipeline.sh")
## run the script by invoking bash - NOT 'sh' (example "bash mypipeline.sh") 

#run the script
#this will be broken up in the same parts following Fred's example

#part 1 - checking the encoding
VSEARCH=$(which vsearch)
FORWARD="R1.fq"  # --fastq_chars requires uncompressed fastq files
OUTPUT="coolproject.assembled.fastq"

# Check quality encoding (33 or 64?)
"${VSEARCH}" \
    --fastq_chars ${FORWARD} 2> ${OUTPUT/.fastq/.log}
Reading fastq file 100%  
Read 15466354 sequences.
Qmin 35, QMax 74, Range 40
Guess: -fastq_qmin 2 -fastq_qmax 41 -fastq_ascii 33
Guess: Illumina 1.8+ format (phred+33)
